switch:
  - platform: template
    name: "Pool Clean And WarmUp"
    id: pool_c_w
    icon: "mdi:pool"
    restore_mode: ${pool_c_w_restore_mode}
    turn_on_action:
      - switch.turn_on: ${id_name}_switch1
      - switch.template.publish:
          id: pool_c_w
          state: ON
      - if:
          condition:
            lambda: |-
              return id(set_temp_pool).state > id(tepm_pool).state;
          then:
            - switch.turn_on: ${id_name}_switch2
      
    turn_off_action:
      - switch.turn_off: ${id_name}_switch1
      - switch.turn_off: ${id_name}_switch2
      - switch.template.publish:
          id: pool_c_w
          state: OFF

  - platform: gpio
    name: "Switch 1 ${short_name} "
    pin: 22
    id: ${id_name}_switch1
    restore_mode: ${switch1_restore_mode}
    internal: true

  - platform: gpio
    name: "Switch 2 ${short_name} "
    pin: 19
    id: ${id_name}_switch2
    restore_mode: ${switch2_restore_mode}
    internal: true